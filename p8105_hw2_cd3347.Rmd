---
title: "HW2"
author: "Christina Dai"
output: github_document
---

```{r setup}
library(tidyverse)
library(readxl)
```

### Problem 1


### Problem 2

Read and clean the Mr. Trash Wheel sheet:

```{r}
mr_trash_tidy = 
  read_excel("./data/202309 Trash Wheel Collection Data.xlsx", sheet = 1,
             range = "A2:N586") %>% 
  janitor::clean_names() %>% 
  mutate(homes_powered = (weight_tons * 500) / 30) %>% 
  mutate(year = as.numeric(year)) %>% 
  mutate(wheel_name = "mr_trash") %>% 
  relocate(wheel_name)
```


Do the same for the Professor Trash Wheel and Gwynnda datasets:

```{r}
prof_trash_tidy = 
  read_excel("./data/202309 Trash Wheel Collection Data.xlsx", sheet = 2,
             range = "A2:M108") %>% 
  janitor::clean_names() %>% 
  mutate(homes_powered = (weight_tons * 500) / 30) %>% 
  mutate(wheel_name = "prof_trash") %>% 
  relocate(wheel_name)
```

```{r}
gwynnda_tidy = 
  read_excel("./data/202309 Trash Wheel Collection Data.xlsx", sheet = 4,
             range = "A2:L157") %>% 
  janitor::clean_names() %>% 
  mutate(homes_powered = (weight_tons * 500) / 30) %>% 
  mutate(wheel_name = "gwynnda") %>% 
  relocate(wheel_name)
  gwynnda_cigs = gwynnda_tidy[1,10] + gwynnda_tidy[2,10] + gwynnda_tidy[3,10] + gwynnda_tidy[4,10] + gwynnda_tidy[5,10]
```


Combine all three datasets:

```{r}
trash_wheels_tidy = 
  bind_rows(mr_trash_tidy, prof_trash_tidy, gwynnda_tidy)
```

In the combined dataset, which includes data from Mr. Trash Wheel, Professor Trash Wheel, and Gwynnda Trash wheel, there are `r nrow(trash_wheels_tidy)` rows. One key variable in this dataset is `weight_tons`, which describes the weight in tons of trash collected by each dumpster receiving trash from each trash wheel. Another key variable is `homes_powered`, which describes the amount of homes that are powered by the electricity generated by the incineration of the trash collected. Other key variables include trash types, such as `polystyrene` and `glass bottles`. The dataset also includes information like year, month, and date. For available data, the total amount of trash collected by Professor Trash Wheel is `r sum(prof_trash_tidy$weight_tons)`. The total number of cigarette butts collected by Gwynnda in July of 2021 is `r gwynnda_cigs`.


### Problem 3

Import and clean the MCI baseline dataset:

```{r}
mci_baseline_tidy = 
  read_csv("./data/MCI_baseline.csv", skip = 1) %>% 
  janitor::clean_names() %>% 
  mutate(sex = recode(sex, `1` = "male", `0` = "female")) %>% 
  mutate(apoe4 = recode(apoe4, `1` = "carrier", `0` = "non-carrier")) %>% 
  filter(age_at_onset > current_age | age_at_onset == '.')

develop_mci = filter(mci_baseline_tidy, age_at_onset != '.')
```

The first step in this process is to read in the data using `read.csv`, skipping the first row because it does not contain any data. Then, after cleaning the names using `janitor::clean_names()`, we use `mutate()` to recode the `sex` variable and `apoe4` variable to be more specific. Lastly, using `filter`, we only include observations where `age_at_onset` is either greater than `current_age` or the null value of "." to ensure that inclusion criteria is met. 483 participants were recruited for this study, with `r nrow(mci_baseline_tidy)` meeting inclusion criteria. `r nrow(develop_mci)` participants developed MCI during the study.






